<!DOCTYPE html>

<html class="writer-html5" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="../../../img/favicon.ico" rel="shortcut icon"/>
<title>Problem 1 - Physics and Mathematics</title>
<link href="../../../css/theme.css" rel="stylesheet"/>
<link href="../../../css/theme_extra.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" rel="stylesheet"/>
<script>
        // Current page data
        var mkdocs_page_name = "Problem 1";
        var mkdocs_page_input_path = "1 Physics/5 Circuits/Problem_1.md";
        var mkdocs_page_url = null;
      </script>
<!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
<script>hljs.highlightAll();</script>
</head>
<body class="wy-body-for-nav" role="document">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side stickynav" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a class="icon icon-home" href="../../.."> Physics and Mathematics
        </a><div role="search">
<form action="../../../search.html" class="wy-form" id="rtd-search-form" method="get">
<input aria-label="Search docs" name="q" placeholder="Search docs" title="Type search term here" type="text"/>
</form>
</div>
</div>
<div aria-label="Navigation menu" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../..">Introduction</a>
</li>
</ul>
<p class="caption"><span class="caption-text">1 Physics</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal">1 Mechanics</a>
<ul>
<li class="toctree-l2"><a class="reference internal" href="../../1%20Mechanics/Problem_1/">Problem 1</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../1%20Mechanics/Problem_2/">Problem 2</a>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal">2 Gravity</a>
<ul>
<li class="toctree-l2"><a class="reference internal" href="../../2%20Gravity/Problem_1/">Problem 1</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../2%20Gravity/Problem_2/">Problem 2</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../2%20Gravity/Problem_3/">Problem 3</a>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal">3 Waves</a>
<ul>
<li class="toctree-l2"><a class="reference internal" href="../../3%20Waves/Problem_1/">Problem 1</a>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal">4 Electromagnetism</a>
<ul>
<li class="toctree-l2"><a class="reference internal" href="../../4%20Electromagnetism/Problem_1/">Problem 1</a>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal current">5 Circuits</a>
<ul class="current">
<li class="toctree-l2 current"><a class="reference internal current" href="#">Problem 1</a>
<ul class="current">
<li class="toctree-l3"><a class="reference internal" href="#equivalent-resistance-using-graph-theory">Equivalent Resistance Using Graph Theory</a>
<ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction-and-motivation">Introduction and Motivation</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal">6 Statistics</a>
<ul>
<li class="toctree-l2"><a class="reference internal" href="../../6%20Statistics/Problem_1/">Problem 1</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../6%20Statistics/Problem_2/">Problem 2</a>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal">7 Measurements</a>
<ul>
<li class="toctree-l2"><a class="reference internal" href="../../7%20Measurements/Problem_1/">Problem 1</a>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">2 Mathematics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../2%20Mathematics/1%20Linear_algebra/">Linear Algebra</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../2%20Mathematics/2%20Analytic_geometry/">Analytic geometry</a>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../2%20Mathematics/3%20Calculus/">Calculus</a>
</li>
</ul>
<p class="caption"><span class="caption-text">3 Discret Mathematics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal">1 Set Theory and ...</a>
<ul>
<li class="toctree-l2"><a class="reference internal" href="../../../3%20Discret_Mathematics/1%20Set%20Theory%20and%20.../_02%20Set_Theory/">Set Theory</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../3%20Discret_Mathematics/1%20Set%20Theory%20and%20.../_03%20Relations/">Relations</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../3%20Discret_Mathematics/1%20Set%20Theory%20and%20.../_04%20Functions/">Functions</a>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal">2 Number Theory and ...</a>
<ul>
<li class="toctree-l2"><a class="reference internal" href="../../../3%20Discret_Mathematics/2%20Number%20Theory%20and%20.../_05%20Combinatorics/">Combinatorics</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../3%20Discret_Mathematics/2%20Number%20Theory%20and%20.../_08%20Number_Theory/">Number Theory</a>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal">3 Recurrence and ...</a>
<ul>
<li class="toctree-l2"><a class="reference internal" href="../../../3%20Discret_Mathematics/3%20Recurrence%20and%20.../_06%20Sequences_and_Series/">Sequences and Series</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../3%20Discret_Mathematics/3%20Recurrence%20and%20.../_07%20Induction/">Induction</a>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../3%20Discret_Mathematics/3%20Recurrence%20and%20.../_09%20Recurrence/">Recurrence</a>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal">4 Graph Theory and ...</a>
<ul>
<li class="toctree-l2"><a class="reference internal" href="../../../3%20Discret_Mathematics/4%20Graph%20Theory%20and%20.../_10%20Graph_Theory/">Graph Theory</a>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal">5 Logic</a>
<ul>
<li class="toctree-l2"><a class="reference internal" href="../../../3%20Discret_Mathematics/5%20Logic/_01%20Logic/">Logic</a>
</li>
</ul>
</li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift">
<nav aria-label="Mobile navigation menu" class="wy-nav-top" role="navigation">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="../../..">Physics and Mathematics</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content"><div aria-label="breadcrumbs navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a aria-label="Docs" class="icon icon-home" href="../../.."></a></li>
<li class="breadcrumb-item">1 Physics</li>
<li class="breadcrumb-item">5 Circuits</li>
<li class="breadcrumb-item active">Problem 1</li>
<li class="wy-breadcrumbs-aside">
</li>
</ul>
<hr/>
</div>
<div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<div class="section" itemprop="articleBody">
<h1 id="problem-1">Problem 1</h1>
<h2 id="equivalent-resistance-using-graph-theory">Equivalent Resistance Using Graph Theory</h2>
<h3 id="introduction-and-motivation">Introduction and Motivation</h3>
<p>Calculating equivalent resistance is a fundamental task in circuit analysis. While traditional approaches use series and parallel simplification rules manually, graph theory provides a powerful alternative – transforming circuit analysis into an algorithmic graph simplification process.</p>
<p>Circuits can be represented as graphs: - Nodes = junctions - Edges = resistors (with resistance as weight)</p>
<p>By identifying series and parallel patterns in the graph, we can iteratively reduce it to compute total resistance between two terminals.</p>
<p>This approach is: - Scalable for large networks - Automatable for software - Insightful for understanding electrical connectivity and topology</p>
<h1 id="learning-goals">Learning Goals</h1>
<p>After completing this task, you should be able to:</p>
<ul>
<li>Represent a resistor network as a weighted graph.</li>
<li>Apply reduction rules (series and parallel) using graph algorithms.</li>
<li>Implement an algorithm that simplifies arbitrary configurations.</li>
<li>Analyze different circuit structures programmatically.</li>
</ul>
<h3 id="algorithm">Algorithm</h3>
<p>The circuit is modeled as a multigraph G = (V, E), where V is the set of junctions (nodes) and E is the set of resistors (edges). Each edge e ∈ E has a weight r_e representing its resistance. Two distinct nodes, <code>start_node</code> and <code>end_node</code>, are specified as the terminals across which the equivalent resistance is sought.</p>
<p>The algorithm proceeds as follows:</p>
<ol>
<li><strong>Initialization:</strong></li>
<li>Construct the graph from the given circuit components.</li>
<li>
<p>Validate that <code>start_node</code> and <code>end_node</code> exist in the graph. If <code>start_node</code> = <code>end_node</code>, the resistance is 0Ω.</p>
</li>
<li>
<p><strong>Iterative Reduction:</strong> Repeatedly apply the following reduction rules until no more simple series or parallel reductions are possible, or the graph is reduced to a single edge between <code>start_node</code> and <code>end_node</code>.</p>
</li>
<li><strong>Parallel Reduction:</strong>
<strong>Identification:</strong> Find any pair of nodes (u, v) connected by two or more edges (resistors R₁, R₂, ..., R_k).</li>
<li><strong>Reduction:</strong> Replace these k parallel resistors with a single equivalent resistor R_p between u and v. The equivalent resistance is calculated as: ( R_p = (Σᵢ₌₁ᵏ 1/R_i)⁻¹ ) if any R_i = 0, R_p = 0. If all R_i = ∞, R_p = ∞.</li>
<li><strong>Action:</strong> Remove the original k edges and add a new edge (u, v) with resistance R_p. If R_p = ∞, effectively remove the connection unless it's the only path.</li>
<li>After a reduction, restart the scan for further simplifications as the graph structure has changed.</li>
</ol>
<h3 id="series-reduction">Series Reduction:</h3>
<ul>
<li><strong>Identification:</strong> Find any node w such that:</li>
<li>w is not the <code>start_node</code> or <code>end_node</code>.</li>
<li>The degree of w, deg(w), is exactly 2. Let the two edges incident to w be (u, w) with resistance R₁, and (w, v) with resistance R₂.</li>
<li>Ensure u ≠ v₁ (if u = v, it's a loop, not a simple series element in a path from <code>start_node</code> to <code>end_node</code>).</li>
<li><strong>Reduction:</strong> Replace the two series resistors R₁ and R₂, and the intermediate node w with a single equivalent resistor R_s between u and v. The equivalent resistance is: ( R_s = R₁ + R₂ ) if R₁ = ∞ or R₂ = ∞, then R_s = ∞.</li>
<li><strong>Action:</strong> Remove node w (which also removes edges (u, w) and (w, v)). Add a new edge (u, v) with resistance R_s. If R_s = ∞, effectively this path segment becomes an open circuit.</li>
<li>After a reduction, restart the scan.</li>
<li><strong>Reduction:</strong> Replace these k parallel resistors with a single equivalent resistor R_p between u and v. The equivalent resistance is calculated as: ( R_p = (Σᵢ₌₁ᵏ 1/R_i)⁻¹ ) if any R_i = 0, R_p = 0. If all R_i = ∞, R_p = ∞.</li>
<li><strong>Action:</strong> Remove the original k edges and add a new edge (u, v) with resistance R_p. If R_p = ∞, effectively remove the connection unless it's the only path.</li>
<li>After a reduction, restart the scan for further simplifications as the graph structure has changed.</li>
<li><strong>Action:</strong> Remove node w (which also removes edges (u, w) and (w, v)). Add a new edge (u, v) with resistance R_s. If R_s = ∞, effectively this path segment becomes an open circuit.</li>
<li>After a reduction, restart the scan.</li>
</ul>
<h3 id="termination-and-result">Termination and Result:</h3>
<ul>
<li>The loop terminates if no series or parallel reductions were made in a full pass.</li>
<li><strong>Ideal Case:</strong> If the graph is reduced to a single edge between <code>start_node</code> and <code>end_node</code>, its resistance is the equivalent resistance.</li>
<li><strong>Final Parallel Case:</strong> If the graph consists of only <code>start_node</code> and <code>end_node</code> and multiple edges directly connecting them, these are in parallel. Calculate their combined parallel resistance.</li>
<li><strong>Non-Reducible Case:</strong> If the graph cannot be simplified further by these rules to one of the above states, the circuit may contain non-series-parallel configurations (e.g., a Wheatstone bridge not in balance). The algorithm, in this form, will report that it cannot fully reduce the circuit.</li>
<li><strong>Open Circuit:</strong> If, at any point or at the end, there is no path between <code>start_node</code> and <code>end_node</code>, the equivalent resistance is ∞.</li>
<li><strong>Short Circuit:</strong> If an equivalent resistance of 0Ω is found.</li>
</ul>
<h1 id="series-connection">Series Connection</h1>
<p>Two resistors R₁ and R₂ in series:
R_eq = R₁ + R₂</p>
<h1 id="parallel-connection">Parallel Connection</h1>
<p>Two resistors R₁ and R₂ in parallel:
1/R_eq = 1/R₁ + 1/R₂ =&gt; R_eq = (1/R₁ + 1/R₂)⁻¹</p>
<h3 id="phyton-implemntaion">Phyton İmplemntaion</h3>
<pre><code class="language-python">import matplotlib.pyplot as plt
import networkx as nx

def draw_circuit(G, pos, title, highlight_paths=None):
    plt.figure(figsize=(10, 6))
    node_colors = ['#4CAF50' if node in ['start', 'end'] else '#2196F3' for node in G.nodes()]

    nx.draw_networkx_nodes(G, pos, node_color=node_colors, node_size=1800, edgecolors='black', linewidths=2)
    nx.draw_networkx_labels(G, pos, font_size=14, font_weight='bold')

    # Draw all edges in black first (thin)
    nx.draw_networkx_edges(G, pos, width=2, edge_color='black')

    # Draw highlighted edges thicker and colored
    if highlight_paths:
        for i, path_edges in enumerate(highlight_paths):
            color = ['#FF5722', '#3F51B5', '#009688'][i % 3]  # Orange, Blue, Teal
            edgelist = []
            for e in path_edges:
                if isinstance(e, (list, tuple)) and len(e) == 2:
                    edgelist.append(e)
            nx.draw_networkx_edges(G, pos, edgelist=edgelist, edge_color=color, width=6, alpha=0.7)

    # Edge labels showing resistance with white background for readability
    edge_labels = {(u, v): f"{d['resistance']}Ω" for u, v, d in G.edges(data=True)}
    nx.draw_networkx_edge_labels(G, pos, edge_labels=edge_labels, font_size=12,
                                bbox=dict(facecolor='white', edgecolor='none', alpha=0.8,
                                          boxstyle='round,pad=0.3'))

    plt.title(title, fontsize=16, pad=20)
    plt.axis('off')
    plt.tight_layout()
    plt.show()


def get_all_edges(graph, u, v):
    if graph.is_multigraph():
        return [graph[u][v][key] for key in graph[u][v]]
    else:
        return [graph.get_edge_data(u, v)]


def combine_parallel_resistances(edges_data):
    total_reciprocal = 0
    for edge in edges_data:
        total_reciprocal += 1 / edge['resistance']
    return 1 / total_reciprocal


def add_or_update_edge(graph, u, v, resistance):
    if graph.has_edge(u, v):
        existing_edges = get_all_edges(graph, u, v)
        resistances = [edge['resistance'] for edge in existing_edges] + [resistance]
        combined = combine_parallel_resistances([{'resistance': r} for r in resistances])
        for _ in existing_edges:
            graph.remove_edge(u, v)
        graph.add_edge(u, v, resistance=round(combined, 5))
    else:
        graph.add_edge(u, v, resistance=round(resistance, 5))


def get_node_pairs_with_parallel_edges(graph):
    pairs = []
    if graph.is_multigraph():
        checked = set()
        for u, v, key in graph.edges(keys=True):
            if (u, v) not in checked and (v, u) not in checked:
                count = graph.number_of_edges(u, v)
                if count &gt; 1:
                    pairs.append((u, v))
                checked.add((u, v))
    return pairs


def get_final_resistance(G, source_node, sink_node):
    if G.is_multigraph():
        edges_data = [G[source_node][sink_node][key] for key in G[source_node][sink_node]]
        total_reciprocal = sum(1 / edge['resistance'] for edge in edges_data)
        return 1 / total_reciprocal
    else:
        return G[source_node][sink_node]['resistance']


def equivalent_resistance_with_visualization(graph, source_node, sink_node):
    G = graph.copy()
    simplification_steps = []

    while True:
        edges_combined_this_step = []

        # Series Reduction: nodes with degree 2 excluding source and sink
        series_nodes = [node for node in G.nodes if node not in (source_node, sink_node) and G.degree(node) == 2]

        for node in series_nodes:
            neighbors = list(G.neighbors(node))
            if len(neighbors) != 2:
                continue

            edges_to_neighbors = []
            for nbr in neighbors:
                edges_data = get_all_edges(G, node, nbr)
                if len(edges_data) &gt; 1:
                    r_parallel = combine_parallel_resistances(edges_data)
                else:
                    r_parallel = edges_data[0]['resistance']
                edges_to_neighbors.append((nbr, r_parallel))

            combined_resistance = edges_to_neighbors[0][1] + edges_to_neighbors[1][1]

            combined_edges = []
            for nbr in neighbors:
                edges_data = get_all_edges(G, node, nbr)
                for _ in edges_data:
                    combined_edges.append((min(node, nbr), max(node, nbr)))

            G.remove_node(node)
            u, v = neighbors[0], neighbors[1]
            add_or_update_edge(G, u, v, combined_resistance)

            edges_combined_this_step.append(combined_edges)

        # Parallel Reduction: edges with multiple parallel edges
        for (u, v) in get_node_pairs_with_parallel_edges(G):
            parallel_edges = get_all_edges(G, u, v)
            if len(parallel_edges) &gt; 1:
                combined_resistance = combine_parallel_resistances(parallel_edges)

                combined_edges = []
                for _ in parallel_edges:
                    combined_edges.append((min(u, v), max(u, v)))

                for _ in parallel_edges:
                    G.remove_edge(u, v)

                G.add_edge(u, v, resistance=round(combined_resistance, 5))

                edges_combined_this_step.append(combined_edges)

        if len(G.edges) == 1 and G.has_edge(source_node, sink_node):
            simplification_steps.append(edges_combined_this_step)
            break

        if not edges_combined_this_step:
            raise Exception("Circuit cannot be further simplified using series-parallel reductions")

        simplification_steps.append(edges_combined_this_step)

    final_resistance = get_final_resistance(G, source_node, sink_node)
    return final_resistance, simplification_steps


# ======= Example Circuit 1 =======
G1 = nx.Graph()
G1.add_edge('start', 'A', resistance=4)
G1.add_edge('A', 'C', resistance=2)
G1.add_edge('start', 'B', resistance=8)
G1.add_edge('B', 'C', resistance=4)
G1.add_edge('C', 'end', resistance=6)

pos1 = {
    'start': (0, 0),
    'A': (1, 1),
    'B': (1, -1),
    'C': (2, 0),
    'end': (3, 0)
}

# ======= Example Circuit 2 =======
G2 = nx.MultiGraph()
G2.add_edge('start', 'C', resistance=6)
G2.add_edge('start', 'C', resistance=12)
G2.add_edge('C', 'end', resistance=6)

pos2 = {
    'start': (0, 0),
    'C': (3, 0),
    'end': (6, 0)
}


def run_and_visualize(G, pos, source, sink, title):
    print(f"\n{title}")
    draw_circuit(G, pos, f"{title} - Original Circuit")

    final_res, steps = equivalent_resistance_with_visualization(G, source, sink)
    print(f"Final Equivalent Resistance between '{source}' and '{sink}': {final_res} Ω")

    for i, step_edges in enumerate(steps):
        step_title = f"{title} - Simplification Step {i + 1}"
        highlight = [edge for group in step_edges for edge in group]
        draw_circuit(G, pos, step_title, highlight_paths=[highlight])


# Run and visualize both circuits
run_and_visualize(G1, pos1, 'start', 'end', "Circuit 1: Parallel-Series Combination")
run_and_visualize(G2, pos2, 'start', 'end', "Circuit 2: Parallel Configuration")
</code></pre>
<p><img alt="alt text" src="../image-1.png"/></p>
<p><img alt="alt text" src="../image-2.png"/></p>
<p><img alt="alt text" src="../image-3.png"/></p>
</div>
</div><footer>
<div aria-label="Footer Navigation" class="rst-footer-buttons" role="navigation">
<a class="btn btn-neutral float-left" href="../../4%20Electromagnetism/Problem_1/" title="Problem 1"><span class="icon icon-circle-arrow-left"></span> Previous</a>
<a class="btn btn-neutral float-right" href="../../6%20Statistics/Problem_1/" title="Problem 1">Next <span class="icon icon-circle-arrow-right"></span></a>
</div>
<hr/>
<div role="contentinfo">
<!-- Copyright etc -->
</div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
</div>
</div>
</section>
</div>
<div aria-label="Versions" class="rst-versions" role="note">
<span class="rst-current-version" data-toggle="rst-current-version">
<span><a href="../../4%20Electromagnetism/Problem_1/" style="color: #fcfcfc">« Previous</a></span>
<span><a href="../../6%20Statistics/Problem_1/" style="color: #fcfcfc">Next »</a></span>
</span>
</div>
<script src="../../../js/jquery-3.6.0.min.js"></script>
<script>var base_url = "../../..";</script>
<script src="../../../js/theme_extra.js"></script>
<script src="../../../js/theme.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script src="../../../search/main.js"></script>
<script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>
</body>
</html>
